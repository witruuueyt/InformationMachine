<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>gam4automation DOC - Logicsteps</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700" rel="stylesheet" type="text/css">
  <link href="style/docs.css" rel="stylesheet">
</head>
<body>
  <div class="menu">
    <div class="logo">
      Content
    </div>
    <nav class="menu-nav">
      
        <ul class="nav">
          <span>Preparation</span>
          <ul class="nav">
            
              <li>
                <a href="installation.html">Installation</a>
              </li>
            
              <li>
                <a href="releasenotes.html">Release Notes</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Basics</span>
          <ul class="nav">
            
              <li>
                <a href="userinterface.html">User Interface</a>
              </li>
            
              <li>
                <a href="runtimeui.html">Runtime UI</a>
              </li>
            
              <li>
                <a href="folderstructure.html">structure</a>
              </li>
            
              <li>
                <a href="importexport.html">Importing and exporting</a>
              </li>
            
              <li>
                <a href="demomodel.html">Demo Model</a>
              </li>
            
              <li>
                <a href="tutorial.html">Tutorial</a>
              </li>
            
              <li>
                <a href="physics.html">Physics</a>
              </li>
            
              <li>
                <a href="import3ddata.html">CAD import</a>
              </li>
            
              <li>
                <a href="cadlink.html">CADLink</a>
              </li>
            
              <li>
                <a href="pixyz.html">Import with PIXZ</a>
              </li>
            
              <li>
                <a href="cadupdater.html">CADUpdater</a>
              </li>
            
              <li>
                <a href="LargeAssemblies.html">Large Assemblies</a>
              </li>
            
              <li>
                <a href="SelectionWindow.html">Selection Window</a>
              </li>
            
              <li>
                <a href="CADChecker.html">CAD Checker</a>
              </li>
            
              <li>
                <a href="parts4cad.html">parts4cad</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Components</span>
          <ul class="nav">
            
              <li>
                <a href="game4automation.html">Game4Automation</a>
              </li>
            
              <li>
                <a href="source.html">Source</a>
              </li>
            
              <li>
                <a href="sink.html">Sink</a>
              </li>
            
              <li>
                <a href="mu.html">MU</a>
              </li>
            
              <li>
                <a href="partchanger.html">PartChanger</a>
              </li>
            
              <li>
                <a href="motionaxis.html">Motions</a>
              </li>
            
              <li>
                <a href="group.html">Group</a>
              </li>
            
              <li>
                <a href="kinematic.html">Kinematics</a>
              </li>
            
              <li>
                <a href="joint.html">Joint</a>
              </li>
            
              <li>
                <a href="drive.html">Drive</a>
              </li>
            
              <li>
                <a href="CAM.html">CAM</a>
              </li>
            
              <li>
                <a href="transportsurface.html">Transport Surface</a>
              </li>
            
              <li>
                <a href="drivebehaviour.html">Drive Behavior</a>
              </li>
            
              <li>
                <a href="chain.html">Chain</a>
              </li>
            
              <li>
                <a href="chainelement.html">Chain element</a>
              </li>
            
              <li>
                <a href="sensor.html">Sensor</a>
              </li>
            
              <li>
                <a href="sensor.html">Sensor</a>
              </li>
            
              <li>
                <a href="measure.html">Measure</a>
              </li>
            
              <li>
                <a href="measureraycast.html">MeasureRaycast</a>
              </li>
            
              <li>
                <a href="lamp.html">Lamp</a>
              </li>
            
              <li>
                <a href="uicomponents.html">UI components</a>
              </li>
            
              <li>
                <a href="plc.html">PLC</a>
              </li>
            
              <li>
                <a href="interface.html">Automation Interfaces</a>
              </li>
            
              <li>
                <a href="s7tcpip.html">S7-TCPIP</a>
              </li>
            
              <li>
                <a href="twincat.html">TwinCAT</a>
              </li>
            
              <li>
                <a href="sharedmemory.html">Shared Memory</a>
              </li>
            
              <li>
                <a href="plcsimadvanced.html">PLCSIM Advanced</a>
              </li>
            
              <li>
                <a href="opcua.html">OPC UA</a>
              </li>
            
              <li>
                <a href="robodk.html">RoboDK</a>
              </li>
            
              <li>
                <a href="modbus.html">Modbus</a>
              </li>
            
              <li>
                <a href="fmu.html">FMI</a>
              </li>
            
              <li>
                <a href="custominterfaces.html">Custom interfaces</a>
              </li>
            
              <li>
                <a href="playmaker.html">Visual Scripting</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class="nav">
          <span>Advanced</span>
          <ul class="nav">
            
              <li>
                <a href="combilerdefines.html">Compiler Defines</a>
              </li>
            
              <li>
                <a href="assemblydefinitions.html">Assembly Defintions</a>
              </li>
            
              <li>
                <a href="yourown.html">Starting your own Project</a>
              </li>
            
          </ul>
        </ul>
      
    </nav>
    <a class="footer" href="https://game4automation.com">
      Game4Automation
    </a>
  </div>
  <div class="page">
   
    <div class="page-content">
	<p>This is the offline version of the documentation. We recommend you to use the <a href="https://game4automation.com/documentation/current/index.html">online documentation.</a></p>
 <h1 id="Logicsteps-included-only-in-Professional"><a href="#Logicsteps-included-only-in-Professional" class="headerlink" title="Logicsteps (included only in Professional)"></a>Logicsteps (included only in Professional)</h1><p>You can programm your own logics in C# or you can use with Unity2021 Visual Scripting (which we will officially support soon). But in quite a lot of cases writing your own Script and even Visual Scripting is not needed or to complicated. You can use the very simple LogicStep visual programming included in Game4Automation Professional)</p>
<p>With Logicsteps you can easily create a sequence of production steps without connected PLC’s or just to simulate your process. Included functions are the control of drives, sensors and Boolean signals.<br>There are several predefined logics that can be used. It is also possible to define user-defined logics. The following chapter describes the available logics and the way to define your own logic.</p>
<img src="images\logicsteps.png">
<h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><p>To use the logic steps, add an empty object. The steps are then attached to this object as a component. The order of the attached components determines the order in which the steps are executed. You can use drag and drop to change the sequence.</p>
<blockquote>
<p>The sequence of Logic steps start automatically when simulation starts. To block a logic step sequence you can insert at the first position a blocking logic step, e.g. for waiting for a signal. If the last step in a sequence is reached automatically the first step is started again.</p>
</blockquote>
<p>If you parallel running logics you must define multiple logic steps on separated game objects. You can start another step by setting signals in waiting on this signals in the parallel logic step sequence. </p>
<p>For each step it is optional to define a unique descriptive name. This is helpful for orientation within the sequence. For the Logic Step JumpOnSignal it is necessary to have this names. </p>
<blockquote>
<p>Logic steps can be <strong>blocking</strong> and <strong>non blocking</strong>. Blocking means, that the step is waiting until a condition is reached, e.g. a Sensor is occupied or a Drive reached a certain position. Non blocking steps are done in 0 time (in the same fixed update cycle) and the next step is directly started.</p>
</blockquote>
<img src="images\logicsteps-basics.png">
<h2 id="Adding-Steps"><a href="#Adding-Steps" class="headerlink" title="Adding Steps"></a>Adding Steps</h2><p>When one logic step is attached to a game object the scene menu provides a quick access to all logic steps.  Another possibility to select a logic step is available under the menu item game4automation/AddComponent/Logicstep or to use add component in the inspector. The name of all logic steps begins with LogicStep.<br><img src="images\logicstep-overlay.png"> </p>
<h2 id="Logic-Steps"><a href="#Logic-Steps" class="headerlink" title="Logic Steps"></a>Logic Steps</h2><p><strong>Delay (blocking)</strong><br>Here you can set a specific delay in seconds. The step provides also a progress bar which is updated during simulation.<br><img src="images\logicstep-delay.png"></p>
<p><strong>DriveTo (blocking)</strong><br>In this step you let a drive move to a certain position. The value is specified in mm. If you select relative, the defined movement is added to the current position of the drive. The progress is visualized within the element. The step is blocking until the drives reaches the destination.<br><img src="images\logicstep-driveto.png"></p>
<p><strong>SetSignalBool (non blocking)</strong><br>A specific bool signal is set to true or false.<br><img src="images\logicstep-setsignaltobool.png"> </p>
<p><strong>StartDriveSpeed (non blocking)</strong><br>In this step, the speed of a drive is set. This allows you to start a drive. If the speed is set to 0, the drive stops. With a positive value, the drive moves forward. A negative speed leads to a backward movement.<br><img src="images\logicstep-startdrivespeed.png"></p>
<p><strong>StartDriveTo (non blocking)</strong><br>In this step you let a drive move to a certain position. The value is specified in mm. If you select relative, the defined movement is added to the current position of the drive. If you want to wait in a certain step on this drive, you can use <em>WaitForDrivesAtTarget</em>.  You can use this for example to start a parallel movement of two drives.<br><img src="images\logicstep-startdriveto.png"></p>
<p><strong>WaitForDrivesAtTarget (blocking)</strong><br>Stop each action until the specified drives have reached their destination.<br><img src="images\logicstep-waitfordrivesattarget.png"></p>
<p><strong>WaitForSensor (blocking)</strong><br>This step is used to wait for a specific sensor. Use the “Wait for occupied” check box to define which sensor state triggers the step.<br><img src="images\logicstep-waitforsensor.png"></p>
<p><strong>JumpOnSignal (non blocking) </strong><br>Depending on the defined signal, you can jump to the selected logic step.<br><img src="images\logicstep-jumponsignal.png"></p>
<h2 id="Developing-your-own-steps"><a href="#Developing-your-own-steps" class="headerlink" title="Developing your own steps"></a>Developing your own steps</h2><p>If the currently available logic steps do not provide a function you need, you can implement your own logic step.<br>To do this, create a new script file in the logicsteps folder. Your user class must be of type LogicStep. </p>
<p>Here is an example of an LogicStep:</p>
<figure class="highlight c"><figcaption><span>#</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogicStep_WaitForSensor</span>:</span> LogicStep</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Sensor Sensor;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">bool</span> WaitForOccupied;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">bool</span> sensornotnull = <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">new</span> <span class="keyword">bool</span> <span class="title">NonBlocking</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> override <span class="keyword">void</span> <span class="title">OnStarted</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        State = <span class="number">50</span>;</span><br><span class="line">        <span class="keyword">if</span> (sensornotnull==<span class="literal">false</span>)</span><br><span class="line">            NextStep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">new</span> <span class="keyword">void</span> <span class="title">Start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sensornotnull = Sensor != null;</span><br><span class="line">        base.Start();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (sensornotnull &amp;&amp; StepActive)</span><br><span class="line">           <span class="keyword">if</span> (Sensor.Occupied==WaitForOccupied)</span><br><span class="line">               NextStep();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you develop your own LogicStep you need to inherit from the base class LogicStep.</p>
<p>You need to implement the following methods in you own custom LogicStep:</p>
<p><strong>protected new bool NonBlocking</strong></p>
<p>returns a true if a LogicStep is non blocking. This will hide the progress bar.</p>
<p><strong>protected override void OnStarted</strong></p>
<p>You implement your logic in this method. This method is called automatically as soon as the step before is finished. If you LogicStep is non blocking your Method needs to finish by calling <strong>NextStep()</strong></p>
<p>If your method is non blocking you need to implement additionally an <strong>FixedUpdate()</strong>. In your fixed update you check your conditions and as soon as your custom Step is finished you call <strong>NextStep()</strong> in fixed update.</p>
<p>You can check with the variable <strong>StepActive</strong> if the Step is currently active (Started). This variable is automatically managed by the base class.</p>
<p>If you need to implement your own <strong>Start()</strong> method, you must call <strong>base.Start()</strong> in your new Start method.</p>
<p><strong> Displaying the State (Progress bar)</strong></p>
<p>There is a public variable of type float <strong>State</strong> which is the setting the progress bar display. You can use values between 0 and 100. You should set this variable in blocking logic steps.</p>

	  <br>

	  <p><font size="1">&copy; 2019 in2Sight GmbH <a href="https://game4automation.com"> https://game4automation.com </a> - All rights reserved. No part of this publication may be reproduced, distributed, or transmitted in any form or by any means, including printing, saving, photocopying, recording, or other electronic or mechanical methods, without the prior written permission of the publisher.</font></p>
    </div>
	
  </div>
  <div class="switch-page">
    
    
  </div>
</body>
</html>